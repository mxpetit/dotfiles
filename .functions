#!/bin/bash

# Get colors in manual pages
man() {
    env \
        LESS_TERMCAP_mb="$(printf '\e[1;31m')" \
        LESS_TERMCAP_md="$(printf '\e[1;31m')" \
        LESS_TERMCAP_me="$(printf '\e[0m')" \
        LESS_TERMCAP_se="$(printf '\e[0m')" \
        LESS_TERMCAP_so="$(printf '\e[1;44;33m')" \
        LESS_TERMCAP_ue="$(printf '\e[0m')" \
        LESS_TERMCAP_us="$(printf '\e[1;32m')" \
        man "$@"
}

# Removes all exited containers
drm() {
    docker rm $(docker ps -aq -f status=exited)
}

# Removes all untagged images
drmi() {
    docker rmi $(docker images --filter "dangling=true" -q)
}

# Scans <nmap_IP_pattern> and display hostname.
# example: hosts '192.168.1.*'
hosts() {
    if [ $# -eq 0 ]
    then
        echo "Usage: hosts <nmap_IP_pattern>"
        return 1
    fi

    for i in  $(nmap -n -sn $1 -oG - | awk '/Up$/{print $2}'); do
        host $i
    done
}
